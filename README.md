# Disclaimer

Задача решена для формального соответствия ТЗ, на базовом уровне, в частности:
- не проводилась оптимизация БД в части объема хранения:
  - не решался вопрос использования UUID как ID записи,
  - UUID хранится в текстовом виде для наглядности,
  - максимальные длины полей заданы произвольно,
  - не рассматривался вопрос масштабирования БД в части использования встроенного механизма реляций, и т.д.
- Сообщения об ошибке вызовов передаются вызывающей функции, как они представлены в объекте Exception.


# Запуск проекта
Для запуска контейнеров Docker в корневой папке проекта выполните команду:

    docker compose up -d

# Администрирование
Для доступа к приложению Adminer (администрирование БД Postgres) откройте URL (если вы запускали проект на локальном ПК):

    http://localhost:8081

Данные для доступа к БД

| Field            | Value        |
|------------------|--------------|
| Движок           | PostgreSQL   |
| Сервер           | db           |
| Имя пользователя | WebRise      |
| Пароль           | wr_secret1   |
| База данных      | subscription |

# API

Для доступа к API обратитесь к эндпойнту нужной функции по URL (если вы запускали проект на локальном ПК):

    http://localhost:8081/<URL функции>

Параметры функций указаны в их описаниях.
Параметры в теле запроса HTTP передаются в формате JSON.

## Создание пользователя

### Описание эндпойнта

| Field | Value  |
|-------|--------|
| URL   | /users |
| метод | POST   |

### Описание параметров

| Параметр  | Обязательный | Описание                               |
|-----------|--------------|----------------------------------------|
| email     | да           | Уникальный почтовый адрес пользователя |
| firstName | нет          | Имя пользователя                       |
| lastName  | нет          | Фамилия пользователя                   |

### Описание результатов

В случае успешного выполнения, функция возвращает статус 200, а в теле - запись пользователя в формате JSON:

| Параметр      | Описание                                     |
|---------------|----------------------------------------------|
| uniqueId      | Уникальный идентификатор пользователя (UUID) |
| email         | Уникальный почтовый адрес пользователя       |
| firstName     | Имя пользователя                             |
| lastName      | Фамилия пользователя                         |
| subscriptions | Подписки пользователя                        |

В случае неуспешного выполнения, функция возвращает статус 400, а в теле - сообщение об ошибке в формате JSON:

| Параметр | Описание            |
|----------|---------------------|
| message  | Сообщение об ошибке |

### Пример выполнения вызова

    curl -X "POST" -H "Content-type: application/json" -d '{"email": "a@b.e", "firstName": "Кукуку", "lastName": "Бебебе"}' "localhost:8080/users"

## Получение информации о пользователе

### Описание эндпойнта

| Field       | Value       |
|-------------|-------------|
| URL         | /users/{id} |
| метод       | GET         |

### Описание параметров

| Параметр  | Обязательный | Описание                                     |
|-----------|--------------|----------------------------------------------|
| id        | да           | Уникальный идентификатор пользователя (UUID) |

### Описание результатов

В случае успешного выполнения, функция возвращает статус 200, а в теле - запись пользователя в формате JSON 
(см. результаты функции Создание пользователя).
В случае если пользователь не найден, функция возвращает статус 404, а в теле - сообщение об ошибке в формате JSON.
В случае ошибки выполнения, функция возвращает статус 400 и пустое тело ответа.

### Пример выполнения вызова

    curl "http://localhost:8080/users/5b33faa5-92b7-4c60-ac46-9c38e07604c7"

